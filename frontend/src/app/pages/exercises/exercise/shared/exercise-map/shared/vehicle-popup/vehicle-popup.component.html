<ng-container *ngIf="vehicle$ | async as vehicle">
    <h5 class="popover-header">
        {{ vehicle.name }}
        <button
            (click)="closePopup.emit()"
            type="button"
            class="btn-close float-end"
        ></button>
    </h5>
    <div class="popover-body">
        <ng-container
            ngbNavItem="names"
            [disabled]="(client$ | async)?.role !== 'trainer'"
        >
            <ng-template ngbNavContent>
                <div class="form-group pb-3">
                    <label class="form-label">Fahrzeugname</label>
                    <input
                        #nameInput="ngModel"
                        [(ngModel)]="name"
                        [maxlength]="16"
                        required
                        type="text"
                        class="form-control"
                    />
                    <app-display-validation
                        [ngModelInput]="nameInput"
                    ></app-display-validation>
                </div>
                <button
                    [disabled]="nameInput.invalid"
                    (click)="renameVehicle()"
                    class="btn btn-warning"
                >
                    Speichern
                </button>
            </ng-template>
        </ng-container>
        <div>
            Verfügbare Patientenplätze:
            {{
                vehicle.patientCapacity - (vehicle.patientIds | keyvalue).length
            }}
            <br />
            Verfügbares Material: 1
        </div>
        <br />

        <button
            (click)="unloadVehicle()"
            [disabled]="vehicleIsCompletelyUnloaded$ | async"
            class="btn btn-primary"
        >
            Alle aussteigen
        </button>
    </div>
</ng-container>
